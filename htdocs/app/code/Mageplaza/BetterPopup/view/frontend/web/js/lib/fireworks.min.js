define(["jquery","jquery/ui"],function(a){return function(a){var i=window.innerWidth,t=window.innerHeight,e=-10,n=20,o=25,r=15,d=5,s=5,h=1,l=200,u=10,p=100,c=10,v=1,f=5;function x(a){return Math.floor(255*Math.random()+a)}function m(){var a=this;a.radius=u,a.previousRadius=u,a.explodingDuration=p,a.hasExploded=!1,a.alive=!0,a.color=new function(a){var i,t,e;a=a||0,this.r=x(a),this.g=x(a),this.b=x(a),this.style=(i=this.r,t=this.g,e=this.b,"rgba("+i+","+t+","+e+", 0.8)")},a.px=window.innerWidth/4+Math.random()*window.innerWidth/2,a.py=window.innerHeight,a.vx=e+Math.random()*n,a.vy=-1*(o+Math.random()*r),a.duration=a.update=function(i){if(a.hasExploded){var t=l-a.radius;a.previousRadius=a.radius,a.radius+=t/c,a.explodingDuration--,0==a.explodingDuration&&(a.alive=!1)}else a.vx+=0,a.vy+=h,a.vy>=0&&a.explode(i),a.px+=a.vx,a.py+=a.vy},a.draw=function(i){i.beginPath(),i.arc(a.px,a.py,a.previousRadius,0,2*Math.PI,!1),a.hasExploded||(i.fillStyle=a.color.style,i.lineWidth=1,i.fill())},a.explode=function(i){a.hasExploded=!0;for(var t=3+Math.floor(3*Math.random()),e=0;e<t;e++)for(var n=10+Math.floor(21*Math.random()),o=d+Math.random()*s,r=2*Math.PI/n,h=Math.random()*r,l=0;l<n;l++)i.push(new w(a,l*r+h,o))}}function w(a,i,t){var e=this;e.px=a.px,e.py=a.py,e.vx=Math.cos(i)*t,e.vy=Math.sin(i)*t,e.color=a.color,e.duration=40+Math.floor(20*Math.random()),e.alive=!0,e.update=function(){e.vx+=0,e.vy+=h/10,e.px+=e.vx,e.py+=e.vy,e.radius=3,e.duration--,e.duration<=0&&(e.alive=!1)},e.draw=function(a){a.beginPath(),a.arc(e.px,e.py,e.radius,0,2*Math.PI,!1),a.fillStyle=e.color.style,a.lineWidth=1,a.fill()}}var y=new function(){var a=this;a.canvas=document.getElementById("screen"),a.canvas.width=i,a.canvas.height=t,a.ctx=a.canvas.getContext("2d"),a.resize=function(){i=window.innerWidth,t=window.innerHeight,a.canvas.width=i,a.canvas.height=t,function(){for(var a=0,d=0;a<t&&d>=0;)a+=d+=h;r=d-(o=d/2);var s=.25*i/(d/2);e=-s,n=2*s}()},a.resize(),window.onresize=a.resize,a.init=function(){a.readyBombs=[],a.explodedBombs=[],a.particles=[];for(var i=0;i<v;i++)a.readyBombs.push(new m)},a.update=function(){for(var i=[];a.explodedBombs.length>0;)(e=a.explodedBombs.shift()).update(),e.alive&&i.push(e);a.explodedBombs=i;for(var t=[];a.readyBombs.length>0;){var e;(e=a.readyBombs.shift()).update(a.particles),e.hasExploded?a.explodedBombs.push(e):t.push(e)}a.readyBombs=t;for(var n=[];a.particles.length>0;){var o=a.particles.shift();o.update(),o.alive&&n.push(o)}a.particles=n},a.draw=function(){a.ctx.beginPath(),a.ctx.fillStyle="rgba(0, 0, 0, 0.1)",a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height);for(var i=0;i<a.readyBombs.length;i++)a.readyBombs[i].draw(a.ctx);for(i=0;i<a.explodedBombs.length;i++)a.explodedBombs[i].draw(a.ctx);for(i=0;i<a.particles.length;i++)a.particles[i].draw(a.ctx)},a.animation=function(){a.update(),a.draw(),100*Math.random()<f&&a.readyBombs.push(new m),requestAnimationFrame(a.animation)}};y.init(),requestAnimationFrame(y.animation)}});